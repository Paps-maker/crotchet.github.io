<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shop - Crochet by Elia</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="icons/icon-192.png">
  <style>
    body {
      background-image: url('https://images.unsplash.com/photo-1606857521015-7e07f10c42b6');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
    }
    .overlay {
      background-color: rgba(255, 240, 245, 0.95);
      padding: 50px 20px;
      border-radius: 20px;
      margin-top: 30px;
    }
    .product-card img {
      height: 250px;
      object-fit: cover;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<!-- Toast Notification -->
<div class="position-fixed top-0 end-0 p-3" style="z-index: 1100">
  <div id="cart-toast" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">Item added to cart üéâ</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>

<nav class="navbar navbar-expand-lg navbar-light bg-light shadow">
  <div class="container">
    <a class="navbar-brand" href="index.html">üßµ Crochet by Elia</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link " href="shop.html">Shop</a></li>
        <li class="nav-item"><a class="nav-link" href="index.html#contact">Contact</a></li>
      </ul>
    </div>
    <div class="d-flex align-items-center">
      <button id="cart-btn" class="btn btn-outline-primary position-relative me-3">
        Cart üõí<span id="cart-count" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
      </button>
    </div>
  </div>
</nav>

<div class="container overlay">
  <h2 class="text-center mb-4">üß∂ Our Handmade Crochet Collection</h2>
  <div class="row">
    <!-- Products -->
    <div class="col-md-3 mb-4"><div class="card product-card">
      <img src="images/Abril mini dress.jpg" class="card-img-top">
      <div class="card-body text-center"><h6 class="card-title">Abril mini dress </h6><p class="card-text">Ksh 1500</p><button class="btn btn-primary">Add to Cart</button></div>
    </div></div>

    <div class="col-md-3 mb-4"><div class="card product-card">
      <img src="images/skirt.jpg" class="card-img-top">
      <div class="card-body text-center"><h6 class="card-title">Skirt</h6><p class="card-text">Ksh 2500</p><button class="btn btn-primary">Add to Cart</button></div>
    </div></div>

    <div class="col-md-3 mb-4"><div class="card product-card">
      <img src="images/shrug.jpg" class="card-img-top">
      <div class="card-body text-center"><h6 class="card-title">Shrug</h6><p class="card-text">Ksh 6000</p><button class="btn btn-primary">Add to Cart</button></div>
    </div></div>

    <div class="col-md-3 mb-4"><div class="card product-card">
      <img src="images/Crochet Top.jpg" class="card-img-top">
      <div class="card-body text-center"><h6 class="card-title">Crochet Top</h6><p class="card-text">Ksh 4500</p><button class="btn btn-primary">Add to Cart</button></div>
    </div></div>

    <div class="col-md-3 mb-4"><div class="card product-card">
      <img src="images/flo bak.jpg" class="card-img-top">
      <div class="card-body text-center"><h6 class="card-title">Flower Basket</h6><p class="card-text">Ksh 2000</p><button class="btn btn-primary">Add to Cart</button></div>
    </div></div>
  </div>
</div>
<section id="custom-order" class="py-5 bg-white">
  <div class="container">
    <h2 class="text-center mb-4">Custom Order Request</h2>
    <form id="customOrderForm" class="row g-3" onsubmit="sendCustomOrder(event)">
      <div class="col-md-6">
        <label for="itemType" class="form-label">Item Type</label>
        <select id="itemType" class="form-select" required onchange="toggleOtherInput(this)">
          <option selected disabled value="">Choose an item</option>
          <option>Beanie</option>
          <option>Blanket</option>
          <option>Top</option>
          <option>Scarf</option>
          <option>Amigurumi Toy</option>
          <option value="Other">Other (please specify)</option>
        </select>
      </div>
      <div class="col-md-6" id="otherItemGroup" style="display:none;">
        <label for="otherItem" class="form-label">Other Item</label>
        <input type="text" class="form-control" id="otherItem" placeholder="Describe the custom item">
      </div>

      <div class="col-md-4">
        <label for="waist" class="form-label">Waist (inches)</label>
        <input type="number" class="form-control" id="waist" placeholder="e.g. 28">
      </div>
      <div class="col-md-4">
        <label for="breast" class="form-label">Breast (inches)</label>
        <input type="number" class="form-control" id="breast" placeholder="e.g. 34">
      </div>
      <div class="col-md-4">
        <label for="hips" class="form-label">Hips (inches)</label>
        <input type="number" class="form-control" id="hips" placeholder="e.g. 36">
      </div>

      <div class="col-md-6">
        <label for="color" class="form-label">Preferred Color</label>
        <input type="text" class="form-control" id="color" placeholder="e.g. Sky Blue" required>
      </div>

      <div class="col-md-6">
        <label for="nameEmbroidery" class="form-label">Name Embroidery (optional)</label>
        <input type="text" class="form-control" id="nameEmbroidery" placeholder="Name to stitch">
      </div>

      <div class="col-md-6">
        <label for="email" class="form-label">Your Email</label>
        <input type="email" class="form-control" id="email" required>
      </div>

      <div class="col-12">
        <label for="additionalDetails" class="form-label">Additional Details</label>
        <textarea class="form-control" id="additionalDetails" rows="4" placeholder="Any specific request or notes..."></textarea>
      </div>

      <div class="col-12 text-center">
        <button type="submit" class="btn btn-success px-5">Send via WhatsApp</button>
      </div>
    </form>
  </div>
</section>

<script>
  function toggleOtherInput(select) {
    const otherGroup = document.getElementById('otherItemGroup');
    if (select.value === "Other") {
      otherGroup.style.display = 'block';
    } else {
      otherGroup.style.display = 'none';
    }
  }

  function sendCustomOrder(e) {
    e.preventDefault();

    const itemType = document.getElementById('itemType').value;
    const otherItem = document.getElementById('otherItem').value;
    const finalItem = itemType === "Other" ? otherItem : itemType;

    const waist = document.getElementById('waist').value;
    const breast = document.getElementById('breast').value;
    const hips = document.getElementById('hips').value;
    const color = document.getElementById('color').value;
    const nameEmbroidery = document.getElementById('nameEmbroidery').value;
    const email = document.getElementById('email').value;
    const additionalDetails = document.getElementById('additionalDetails').value;

    const message = 
      `Hello! I'd like to request a custom crochet item:%0A` +
      `üß∂ Item: ${finalItem}%0A` +
      `üìè Measurements - Waist: ${waist}", Breast: ${breast}", Hips: ${hips}"%0A` +
      `üé® Preferred Color: ${color}%0A` +
      `üßµ Name Embroidery: ${nameEmbroidery || 'None'}%0A` +
      `üìß Email: ${email}%0A` +
      `üìù Additional Notes: ${additionalDetails || 'None'}`;

    const whatsappNumber = '254712345678'; // Replace with your number
    window.open(`https://wa.me/${whatsappNumber}?text=${message}`, '_blank');
  }
</script>


<!-- Cart Modal -->
<div id="cart-modal" class="modal fade">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Your Cart</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <ul id="cart-items" class="list-group"></ul>
        <h5>Total: <span id="cart-total">Ksh 0.00</span></h5>
      </div>
      <div class="modal-footer">
        <button id="checkout-btn" class="btn btn-success">Order via WhatsApp</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];

const updateCartUI = () => {
  document.getElementById('cart-count').textContent = cart.length;
  const cartList = document.getElementById('cart-items');
  cartList.innerHTML = '';
  let total = 0;
  cart.forEach((item, i) => {
    total += item.price;
    cartList.innerHTML += `<li class="list-group-item d-flex justify-content-between">${item.title} ‚Äì Ksh ${item.price}<button class="btn btn-sm btn-danger remove-btn" data-index="${i}">√ó</button></li>`;
  });
  document.getElementById('cart-total').textContent = 'Ksh ' + total.toFixed(2);
  localStorage.setItem('cart', JSON.stringify(cart));
  document.querySelectorAll('.remove-btn').forEach(btn =>
    btn.onclick = e => { cart.splice(e.target.dataset.index, 1); updateCartUI(); }
  );
};

const showToast = () => {
  const toastEl = document.getElementById('cart-toast');
  const toast = new bootstrap.Toast(toastEl);
  toast.show();
};

document.querySelectorAll('.product-card .btn-primary').forEach(btn => {
  btn.onclick = () => {
    const card = btn.closest('.product-card');
    const title = card.querySelector('.card-title').textContent;
    const price = parseFloat(card.querySelector('.card-text').textContent.replace('Ksh', '').trim());
    cart.push({ title, price });
    updateCartUI();
    showToast();
  };
});

document.getElementById('cart-btn').onclick = () => {
  new bootstrap.Modal(document.getElementById('cart-modal')).show();
  updateCartUI();
};

document.getElementById('checkout-btn').onclick = () => {
  if (!cart.length) return;
  const msg = cart.map(i => `${i.title} ‚Äî Ksh ${i.price}`).join('%0A') +
              `%0ATotal: Ksh ${cart.reduce((a, b) => a + b.price, 0).toFixed(2)}`;
  window.open(`https://wa.me/254712345678?text=Hello! I'd like to order:%0A${msg}`, '_blank');
};

updateCartUI();
</script>
</body>
</html>
